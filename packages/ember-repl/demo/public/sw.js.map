{"version":3,"file":"sw.js","sources":["../../../../node_modules/.pnpm/uuid@9.0.1/node_modules/uuid/dist/esm-browser/sha1.js","../src/service-worker/fetch-handler.ts","../../../../node_modules/.pnpm/uuid@9.0.1/node_modules/uuid/dist/esm-browser/regex.js","../../../../node_modules/.pnpm/uuid@9.0.1/node_modules/uuid/dist/esm-browser/stringify.js","../../../../node_modules/.pnpm/uuid@9.0.1/node_modules/uuid/dist/esm-browser/v35.js","../../../../node_modules/.pnpm/uuid@9.0.1/node_modules/uuid/dist/esm-browser/v5.js","../../../../node_modules/.pnpm/uuid@9.0.1/node_modules/uuid/dist/esm-browser/parse.js","../../../../node_modules/.pnpm/uuid@9.0.1/node_modules/uuid/dist/esm-browser/validate.js","../src/service-worker/sw.ts","../src/compile/utils.ts"],"sourcesContent":["// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n\n    case 1:\n      return x ^ y ^ z;\n\n    case 2:\n      return x & y ^ x & z ^ y & z;\n\n    case 3:\n      return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\n\nfunction sha1(bytes) {\n  const K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  const H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof bytes === 'string') {\n    const msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = [];\n\n    for (let i = 0; i < msg.length; ++i) {\n      bytes.push(msg.charCodeAt(i));\n    }\n  } else if (!Array.isArray(bytes)) {\n    // Convert Array-like to Array\n    bytes = Array.prototype.slice.call(bytes);\n  }\n\n  bytes.push(0x80);\n  const l = bytes.length / 4 + 2;\n  const N = Math.ceil(l / 16);\n  const M = new Array(N);\n\n  for (let i = 0; i < N; ++i) {\n    const arr = new Uint32Array(16);\n\n    for (let j = 0; j < 16; ++j) {\n      arr[j] = bytes[i * 64 + j * 4] << 24 | bytes[i * 64 + j * 4 + 1] << 16 | bytes[i * 64 + j * 4 + 2] << 8 | bytes[i * 64 + j * 4 + 3];\n    }\n\n    M[i] = arr;\n  }\n\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;\n\n  for (let i = 0; i < N; ++i) {\n    const W = new Uint32Array(80);\n\n    for (let t = 0; t < 16; ++t) {\n      W[t] = M[i][t];\n    }\n\n    for (let t = 16; t < 80; ++t) {\n      W[t] = ROTL(W[t - 3] ^ W[t - 8] ^ W[t - 14] ^ W[t - 16], 1);\n    }\n\n    let a = H[0];\n    let b = H[1];\n    let c = H[2];\n    let d = H[3];\n    let e = H[4];\n\n    for (let t = 0; t < 80; ++t) {\n      const s = Math.floor(t / 20);\n      const T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[t] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n\n  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];\n}\n\nexport default sha1;","import { nameFor } from '../compile/utils.ts';\n\nconst URLS = ['/compile.sw', '/module.sw'];\n\nconst COMPILE_CACHE = new Map();\n\nexport async function handleFetch(event: FetchEvent): Promise<Response> {\n  // event.request.url is a string\n  const url = new URL(event.request.url);\n\n  /**\n    * We only define two URL handlers,\n    * - compile.sw - actually does compilation\n    * - module.sw - loads what we compiled\n    */\n  if (!URLS.some((matcher) => url.pathname.startsWith(matcher))) {\n    return fetch(event.request);\n  }\n\n  if (COMPILE_CACHE.has(url.pathname)) {\n    return moduleResponse(url.pathname);\n  }\n\n  if (url.pathname === '/compile.sw') {\n    return maybe(() => compile(event.request));\n  }\n\n  return error(`Unhandled URL: ${url.pathname}`);\n}\n\nasync function maybe<Return>(op: () => Return | Promise<Return>) {\n  try {\n    return await op();\n  } catch (e) {\n    return error(e);\n  }\n}\n\nfunction error(msg: unknown | string, status = 500) {\n  let payload: string | Error | Record<string, unknown>;\n\n  if (typeof msg === 'string') {\n    payload = msg;\n  } else if (msg instanceof TypeError) {\n    payload = {\n      ...msg,\n      name: msg.name,\n      message: msg.message,\n      stack: msg.stack,\n    };\n  } else {\n    payload = JSON.stringify(msg);\n  }\n\n  return new Response(JSON.stringify({ error: payload }), {\n    status,\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  });\n}\n\nfunction moduleResponse(pathName: string) {\n  let code = COMPILE_CACHE.get(pathName);\n\n  if (!code) {\n    throw new Error(`Code has not been compiled. call /compile.sw with the code`);\n  }\n\n  return new Response(code, {\n    headers: {\n      'Content-Type': 'application/javascript',\n    },\n  });\n}\n\nasync function compile(request: Request) {\n  let body: { code?: string, format?: string } = await request.json();\n\n  let { code, format } = body;\n\n  if (!code) {\n    throw new Error(`'code' property missing in body`);\n  }\n\n  if (!format) {\n    throw new Error(`'format' property missing in body`);\n  }\n\n  let name = nameFor(code + format, 'sw:named');\n\n  let modulePath = `/module.sw/${name}.js`;\n\n  // TODO: all external imports must be changed\n  //       (via babel plugin (because we already have babel))\n  //       to use https://esm.sh/*thePackage\n  //\n  //       https://esm.sh/#docs\n  //\n  // let compiled = await compileGJS({ name, code });\n  //\n  // TODO: only do this for import paths which have not already\n  //       been declared by the local scope references\n  let compiled = code.replaceAll(/from ('|\")([^'\"]+)('|\")/g, function(_match, quote, moduleName, quote2) {\n    let replacementModule = `https://esm.sh/*${moduleName}`;\n\n    return `from ${quote}${replacementModule}${quote2}`;\n  });\n\n  // COMPILE_CACHE.set(modulePath, compiled);\n  COMPILE_CACHE.set(modulePath, compiled);\n\n  let response = new Response(JSON.stringify({\n    importPath: modulePath,\n    content: code,\n  }), {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  });\n\n  return response;\n}\n","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import { unsafeStringify } from './stringify.js';\nimport parse from './parse.js';\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  const bytes = [];\n\n  for (let i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nexport const DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport const URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function v35(name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    var _namespace;\n\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = parse(namespace);\n    }\n\n    if (((_namespace = namespace) === null || _namespace === void 0 ? void 0 : _namespace.length) !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    let bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (let i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return unsafeStringify(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nconst v5 = v35('v5', 0x50, sha1);\nexport default v5;","import validate from './validate.js';\n\nfunction parse(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  let v;\n  const arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nexport default parse;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import { handleFetch } from './fetch-handler.ts';\n\n// Silly Workers\nexport type { };\ndeclare const self: ServiceWorkerGlobalScope;\n\n/**\n * For a given markdown document id, we will compile\n * N components within that glimdown, and return an object\n * map of an arbitrary name of the default export to the URL\n * for which the module may be imported from.\n *\n * Since the set of modules is uniqueish to the glimdown\n * document id, we'll try to keep a history of 10 most recent\n * compiles, so that quick edits don't need to do extra work\n *\n * example:\n *\n *  POST /compile.sw\n *    id: gmd.id,\n *    components: [{ name: string, code: string }]\n *\n *   =>\n *\n *  {\n *    [name] => \"url/to/import\"\n *  }\n *\n *\n */\nself.addEventListener('install', () => {\n  // force moving on to activation even if another service worker had control\n  self.skipWaiting();\n});\n\nself.addEventListener('activate', (event) => {\n  // Claim any clients immediately, so that the page will be under SW control without reloading.\n  const claim = self.clients.claim();\n\n  event.waitUntil(claim);\n\n  console.info(`\\\n    Service Worker installed successfully!\n\n    This service worker is used for compiling JavaScript\n    and providing modules to the main thread.\n  `);\n});\n\n\nself.addEventListener(\"fetch\", (event) => {\n  event.respondWith(handleFetch(event));\n});\n\n","import { pascalCase } from 'change-case';\nimport { v5 as uuidv5 } from 'uuid';\n\n/**\n * a namespace is required for uuid v5\n *\n * it helps generate stable outputs for for any given input.\n */\nconst NAMESPACE = '926f034a-f480-4112-a363-321244f4e5de';\nconst DEFAULT_PREFIX = 'ember-repl';\n\n/**\n * For any given code block, a reasonably stable name can be\n * generated.\n * This can help with cacheing previously compiled components,\n * and generally allowing a consumer to derive \"known references\" to user-input\n */\nexport function nameFor(code: string, prefix = DEFAULT_PREFIX) {\n  let id = uuidv5(code, NAMESPACE);\n\n  return `${prefix ? `${prefix}-` : ''}${id}`;\n}\n\n/**\n * Returns the text for invoking a component with a given name.\n * It is assumed the component takes no arguments, as would be the\n * case in REPLs / Playgrounds for the \"root\" component.\n */\nexport function invocationOf(name: string) {\n  if (name?.length === 0) {\n    throw new Error(`name passed to invocationOf must have non-0 length`);\n  }\n\n  return `<${invocationName(name)} />`;\n}\n\n/**\n * Core team does not want to support changes to '@ember/string' (v2 addonification, specifically)\n * inflection does not support hyphens\n */\nexport function invocationName(name: string) {\n  return pascalCase(name).replaceAll('_', '');\n}\n"],"names":["f","s","x","y","z","ROTL","n","error","msg","status","payload","TypeError","name","message","stack","JSON","stringify","Response","headers","REGEX","byteToHex","i","push","toString","slice","v5","version","hashfunc","generateUUID","value","namespace","buf","offset","_namespace","str","unescape","encodeURIComponent","bytes","length","charCodeAt","stringToBytes","uuid","test","validate","v","arr","Uint8Array","parseInt","parse","set","K","H","Array","isArray","prototype","call","l","N","Math","ceil","M","Uint32Array","j","pow","floor","W","t","a","b","c","d","e","T","unsafeStringify","err","DNS","URL","v35","URLS","COMPILE_CACHE","Map","self","addEventListener","skipWaiting","event","claim","clients","waitUntil","console","info","respondWith","async","url","request","some","matcher","pathname","startsWith","has","pathName","code","get","Error","moduleResponse","op","body","json","format","modulePath","prefix","uuidv5","nameFor","compiled","replaceAll","_match","quote","moduleName","quote2","importPath","content","compile","maybe","fetch","handleFetch"],"mappings":"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","x_google_ignoreList":[0,2,3,4,5,6,7]}